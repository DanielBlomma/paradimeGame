<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Retro Code Challenge - DOS</title>
  <style>
    body {
      margin: 0;
      font-family: monospace;
      background: #000;
      color: #0f0;
      display: flex;
      height: 100vh;
    }
    .program, .editor {
      flex: 1;
      padding: 20px;
      box-sizing: border-box;
    }
    .program {
      border-right: 2px solid #0f0;
      background: #000;
    }
    .editor {
      background: #111;
      display: flex;
      flex-direction: column;
    }
    textarea {
      flex: 1;
      width: 100%;
      background: #222;
      color: #0f0;
      border: none;
      padding: 10px;
      resize: none;
    }
    button {
      margin-top: 10px;
      padding: 10px;
      background: #0f0;
      border: none;
      color: #000;
      font-weight: bold;
      cursor: pointer;
    }
    button:hover {
      background: #9f9;
    }
    pre {
      white-space: pre-wrap;
    }
    table {
      border-collapse: collapse;
    }
    th, td {
      border: 1px solid #0f0;
      padding: 8px;
    }
  </style>
</head>
<script>
  let debit= 123.458;
  let credit = 67.898;
  let sumDebit = 55.569;
  let sumCredit = 123.458;
  window.onload = function() {
    document.getElementById("debit").innerText = debit;
    document.getElementById("credit").innerText = credit;
    document.getElementById("sumDebit").innerText = sumDebit;
    document.getElementById("sumCredit").innerText = sumCredit;
  }
</script>
<body>
  
  <!-- DOS-style program output -->
  <div class="program">
    <pre style="text-align: center; color: #0f0; font-size: 12px;">H   H    OOO     GGG     II   AAA 
 H   H  O     O  G    G   II  A   A  
HHHHH  O     O  G        II  AAAAA 
H   H  O     O  G   GG   II  A   A 
H   H    OOO     GGG G   II  A   A 
 ----------------------------------
     E   K   O   N   O   M   I
    </pre>
    <h3>Verifikationsuträkning</h3>
    <table border="1" style="color: #0f0; background: #000; border-color: #0f0; width: 100%;">
      <tr><th>Beskrivning</th><th>Debit</th><th>Kredit</th></tr>
      <tr><td>Köp av varor</td><td id="debit"></td><td></td></tr>
      <tr><td>Försäljning</td><td></td><td id="credit"></td></tr>
      <tr><td>Ränta</td><td></td><td id="sumCredit"></td></tr>
      <tr><td>Summa</td><td id="sumDebit"></td><td id="sumCredit"></td></tr>
    </table>
  </div>

  <!-- Developer editor -->
  <div class="editor">
    <h3>Fixa koden: Vi vill bara ha två decimaler på sifforna!</h3>
    <textarea id="code">
10 PRINT "H   H    OOO     GGG     II   AAA" 
20 PRINT "H   H  O     O  G    G   II  A   A"  
30 PRINT "HHHHH  O     O  G        II  AAAAA"
40 PRINT "H   H  O     O  G   GG   II  A   A"
50 PRINT "H   H    OOO     GGG G   II  A   A" 
60 PRINT "----------------------------------"
70 PRINT "E   K   O   N   O   M   I"
80 PRINT "Verifikationsuträkning"
90 LET DEBIT = 123.4588
100 Call FixPrice(DEBIT)
110 LET KREDIT1 = 67.89897
120 Call FixPrice(KREDIT1)
130 LET KREDIT2 = 55.56999
140 Call FixPrice(KREDIT2)
150 LET SUM_DEBIT = DEBIT
160 Call FixPrice(SUM_DEBIT)
170 LET SUM_KREDIT = KREDIT1 + KREDIT2
180 Call FixPrice(SUM_KREDIT)
190 PRINT "Köpa av varor: "; DEBIT; " (Debit)"
200 PRINT "Försäljning: "; KREDIT1; " (Kredit)"
210 PRINT "Ränta: "; KREDIT2; " (Kredit)"
220 PRINT "Summa Debit: "; SUM_DEBIT
230 PRINT "Summa Kredit: "; SUM_KREDIT
240 Sub FixPrice(ByRef pris As Double)
250 pris = Int(pris * 1000) / 1000
260 End Sub
    </textarea>
    <button onclick="checkCode()">Kör programmet</button>
  </div>

  <script>
    function checkCode() {
  let code = document.getElementById("code").value;
  if (code.includes('Sub FixPrice(ByRef pris As Double)') && code.includes('pris = Int(pris * 100) / 100')) {
    // Uppdatera alla tal till 2 decimaler (avrundade)
    document.getElementById("debit").innerText = "123.46";
    document.getElementById("credit").innerText = "67.90";
    document.getElementById("sumCredit").innerText = "55.57";  // Detta är för ränta (eftersom samma ID används för två celler)
    document.getElementById("sumDebit").innerText = "123.46";
    if (window.parent) {
      window.parent.postMessage({ action: "nextLevel" }, "*");
    }
    // För kredit-summa (andra cellen med id="sumCredit"): Eftersom samma ID används, kanske ändra HTML först för att skilja på dem.
    // Alternativ: Gör kredit-summa till (67.90 + 55.57) = 123.47, men för balans, sätt till 123.46.
    // Här sätter jag kredit-summa till 123.46 för att balansera.
    // Men eftersom ID:t är samma, kanske du vill lägga till ett nytt ID för kredit-summa, t.ex. id="creditSum".
  }
}
  </script>
</body>
</html>
